<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>IoT_Indoor_Environment_Control_System Dashboard</title>
    <link
      href="https://cdn.jsdelivr.net/npm/simple-datatables@7.1.2/dist/style.min.css"
      rel="stylesheet"
    />
    <link href="index.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script
      src="https://kit.fontawesome.com/a076d05399.js"
      crossorigin="anonymous"
    ></script>
  </head>
  <body class="sb-nav-fixed">
    <nav class="sb-topnav navbar navbar-expand navbar-dark bg-dark">
      <a class="navbar-brand ps-3" href="#"
        >IoT_Indoor_Environment_Control_System</a
      >
      <button
        class="btn btn-link btn-sm order-1 order-lg-0 me-4 me-lg-0"
        id="sidebarToggle"
        href="#"
      >
        <i class="fas fa-bars"></i>
      </button>
    </nav>
    <div id="layoutSidenav">
      <div id="layoutSidenav_nav">
        <nav class="sb-sidenav accordion sb-sidenav-dark" id="sidenavAccordion">
          <div class="sb-sidenav-menu">
            <div class="nav">
              <a class="nav-link" href="#">
                <div class="sb-nav-link-icon">
                  <i class="fas fa-tachometer-alt"></i>
                </div>
                Dashboard
              </a>
            </div>
          </div>
        </nav>
      </div>
      <div id="layoutSidenav_content">
        <main>
          <div class="container-fluid px-4">
            <h1 class="mt-4">
              IoT_Indoor_Environment_Control_System Dashboard
            </h1>

            <!-- Sensor Data Cards -->
            <div class="row">
              <div class="col-xl-4 col-md-6">
                <div class="card bg-primary text-white mb-4">
                  <div class="card-body">
                    Temperature:
                    <span id="temperature">{{ data.temperature }}</span>Â°C
                  </div>
                </div>
              </div>
              <div class="col-xl-4 col-md-6">
                <div class="card bg-warning text-white mb-4">
                  <div class="card-body">
                    Humidity: <span id="humidity">{{ data.humidity }}</span>%
                  </div>
                </div>
              </div>
              <div class="col-xl-4 col-md-6">
                <div class="card bg-success text-white mb-4">
                  <div class="card-body">
                    Pressure: <span id="pressure">{{ data.pressure }}</span> hPa
                  </div>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-xl-4 col-md-6">
                <div class="card bg-danger text-white mb-4">
                  <div class="card-body">
                    Wind Speed:
                    <span id="wind_speed">{{ data.wind_speed }}</span> km/h
                  </div>
                </div>
              </div>
              <div class="col-xl-4 col-md-6">
                <div class="card bg-info text-white mb-4">
                  <div class="card-body">
                    Wind Direction:
                    <span id="wind_direction">{{ data.wind_direction }}</span>
                  </div>
                </div>
              </div>
              <div class="col-xl-4 col-md-6">
                <div class="card bg-secondary text-white mb-4">
                  <div class="card-body">
                    Rainfall: <span id="rainfall">{{ data.rainfall }}</span> mm
                  </div>
                </div>
              </div>
              <div class="col-xl-4 col-md-6">
                <div class="card bg-secondary text-white mb-4">
                  <div class="card-body">
                    Dust: <span id="dust">{{ data.dust }}</span> pm2.5
                  </div>
                </div>
              </div>
            </div>

            <!-- Window Control -->
            <div class="row">
              <div class="col-xl-6">
                <div class="card bg-light mb-4">
                  <div class="card-body">
                    <h5>
                      Window Status:
                      <span id="window_status">{{ data.window_state }}</span>
                    </h5>
                    <button
                      class="btn btn-success"
                      onclick="controlWindow('open')"
                    >
                      Open
                    </button>
                    <button
                      class="btn btn-danger"
                      onclick="controlWindow('close')"
                    >
                      Close
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <!-- Charts -->
            <div class="row">
              <div class="col-xl-6">
                <div class="card mb-4">
                  <div class="card-header">
                    <i class="fas fa-chart-area me-1"></i>
                    Time Series Sensor Data
                  </div>
                  <div class="card-body">
                    <canvas id="timeChart" width="100%" height="40%"></canvas>
                  </div>
                </div>
              </div>
              <div class="col-xl-6">
                <div class="card mb-4">
                  <div class="card-header">
                    <i class="fas fa-chart-bar me-1"></i>
                    Monthly Sensor Data
                  </div>
                  <div class="card-body">
                    <canvas id="monthlyChart" width="100%" height="40"></canvas>
                  </div>
                </div>
              </div>
            </div>

            <!-- Sensor Data Table -->
            <div class="card mb-4">
              <div class="card-header">
                <i class="fas fa-table me-1"></i>
                Sensor Data Table
              </div>
              <div class="card-body">
                <table id="dataTable" class="table table-striped">
                  <thead>
                    <tr>
                      <th>Time</th>
                      <th>Temperature</th>
                      <th>Humidity</th>
                      <th>Pressure</th>
                      <th>Wind Speed</th>
                      <th>Wind Direction</th>
                      <th>Rainfall</th>
                      <th>Window State</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>{{ data.time }}</td>
                      <td>{{ data.temperature }}</td>
                      <td>{{ data.humidity }}</td>
                      <td>{{ data.pressure }}</td>
                      <td>{{ data.wind_speed }}</td>
                      <td>{{ data.wind_direction }}</td>
                      <td>{{ data.rainfall }}</td>
                      <td>{{ data.window_state }}</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </main>
      </div>
    </div>
    <script defer src="index.js"></script>
  </body>
</html>
